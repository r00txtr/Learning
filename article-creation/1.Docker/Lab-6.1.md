# Lab 6.1: Creating a Docker Swarm

In this lab, we will learn how to create and manage a **Docker Swarm**. Docker Swarm is a native clustering and orchestration tool for Docker containers. It allows you to manage a cluster of Docker nodes and deploy containerized applications across multiple hosts. 

By the end of this lab, you will:
1. Initialize a Docker Swarm on a master node.
2. Join a second node to the Swarm.
3. Verify that the second node has successfully joined the Swarm.

---

## Table of Contents
1. **Introduction**
2. **Step-by-Step Instructions**
    1. Initializing the Docker Swarm
    2. Joining a Second Node to the Swarm
    3. Verifying the Swarm Nodes
3. **Verification**
4. **Conclusion**

---

## Introduction

A **Docker Swarm** is a group of Docker engines that work together as a single cluster. In a Docker Swarm, there are two types of nodes:
- **Manager nodes**: Handle the management tasks of the Swarm (e.g., scheduling services, maintaining cluster state).
- **Worker nodes**: Execute tasks assigned to them by the manager nodes.

In this lab, we will:
1. Initialize a Swarm on `pod-[username]-node01` as the manager node.
2. Add `pod-[username]-node02` as a worker node to the Swarm.
3. Verify that the worker node has successfully joined the Swarm.

We will execute these commands on `pod-[username]-node01` and `pod-[username]-node02`. Replace `[username]` with your actual username and `[X]` with the specific IP address segment for your environment.

---

## Step-by-Step Instructions

### Step 1: Initializing the Docker Swarm on Node 01

We will start by initializing the Docker Swarm on **node01**.

#### 1.1 Initialize the Swarm

On `pod-[username]-node01`, run the following command to initialize the Docker Swarm:

```bash
docker swarm init --advertise-addr 10.7.7.10
```

Explanation:
- `docker swarm init`: Initializes the Docker engine as a Swarm manager.
- `--advertise-addr 10.7.7.10`: Specifies the IP address that other nodes will use to connect to this manager node.

Once the Swarm is initialized, Docker will display a command with a **token** that can be used by other nodes to join the Swarm as workers. The output should look something like this:

```
Swarm initialized: current node (abc123xyz456) is now a manager.
To add a worker to this swarm, run the following command:

    docker swarm join --token SWMTKN-1-2sldjfl2djflsdkjsfklj12345abcd 10.7.7.10:2377
```

Copy this join command with the token, as we will need it in the next step to add **node02** to the Swarm.

---

### Step 2: Joining Node 02 to the Swarm

Now, let’s add the second node (pod-[username]-node02) to the Swarm as a worker node.

#### 2.1 Join Node 02 to the Swarm

On `pod-[username]-node02`, run the join command that was generated by the `docker swarm init` command on **node01**. The command will look similar to this:

```bash
docker swarm join --token [TOKEN] 10.7.7.10:2377
```

Replace `[TOKEN]` with the actual token that was generated during the Swarm initialization. This command connects **node02** to **node01** as a worker node using the provided token and IP address (`10.7.7.10` is the manager node’s IP).

If the command runs successfully, you will see a confirmation message:

```
This node joined a swarm as a worker.
```

---

### Step 3: Verifying the Swarm Nodes

Now, let’s return to the manager node (**node01**) and verify that **node02** has successfully joined the Swarm.

#### 3.1 List the Swarm Nodes

On `pod-[username]-node01`, run the following command to list all the nodes in the Swarm:

```bash
docker node ls
```

This command will display a list of all nodes in the Swarm, along with their roles and statuses. The output should look something like this:

```
ID                            HOSTNAME            STATUS    AVAILABILITY   MANAGER STATUS
abc123xyz456                  pod-[username]-node01   Ready     Active         Leader
def456xyz789                  pod-[username]-node02   Ready     Active
```

- The **Leader** is the manager node (`pod-[username]-node01`).
- The second node (`pod-[username]-node02`) should appear as **Ready** with the role of **worker**.

---

## Verification

To verify that the lab was completed successfully, check the following:
1. **Initialization**: The Docker Swarm was initialized successfully on **node01**.
2. **Worker Node Join**: **node02** successfully joined the Swarm as a worker.
3. **Swarm Node List**: Running `docker node ls` on **node01** shows both **node01** (manager) and **node02** (worker) as **Ready**.

---

## Conclusion

In this lab, you have successfully created a Docker Swarm by:
1. Initializing a Swarm on **pod-[username]-node01**.
2. Adding **pod-[username]-node02** to the Swarm as a worker.
3. Verifying that both nodes are part of the Swarm.

This is the foundation for building a scalable, containerized infrastructure using Docker Swarm, where you can deploy services across multiple nodes.

### Example Output of `docker node ls`:

```
ID                            HOSTNAME            STATUS    AVAILABILITY   MANAGER STATUS
abc123xyz456                  pod-[username]-node01   Ready     Active         Leader
def456xyz789                  pod-[username]-node02   Ready     Active
```

Congratulations on completing **Lab 6.1: Creating a Docker Swarm**! You now have a multi-node Docker Swarm cluster ready for orchestration.

Happy Dockering!
